<div class="relative">
    <MudPopover Open="@Visible" AnchorOrigin="Origin.TopRight" Class="ml-4 px-4 pt-3 pb-2">
        <MudStack>
            <MudText Typo="Typo.h6">Add css or js link from the internet</MudText>
            <div>
                <MudStack Spacing="1" Row AlignItems="AlignItems.Center" Class="mb-4">
                    <MudTextField @bind-Value="@AddLink"
                    Variant="Variant.Outlined"
                    Margin="Margin.Dense"
                    Class="try-save-snippet-input"
                    Clearable />
                    <MudIconButton Icon="@Icons.Material.Filled.ContentPaste" OnClick="@PasteLinkFromClipboard" Class="pa-2 mr-n3" Size="Size.Small" />
                    <MudIconButton Icon="@Icons.Material.Filled.Add" Disabled="@(!(AddLink.Length > 8))" OnClick="@VerifyLink" Class="pa-2 mr-n3" Size="Size.Small" />
                </MudStack>
            </div>

            @if (Loading)
            {
                <MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-4" />
            }
            else
            {
                <div style="width: 400px">
                    <MudList T="string">
                        @foreach (var item in AddLinks)
                        {
                            <MudListItem OnClick="@(() => item.IsIncluded = !item.IsIncluded)" Class="py-0 my-0">
                                <MudStack Row AlignItems="AlignItems.Center" Justify="Justify.SpaceBetween">
                                    <MudText Typo="Typo.body2">@item.Name</MudText>
                                    <MudStack Row AlignItems="AlignItems.Center" Spacing="2" Class="my-0">
                                        <MudSwitch Color="Color.Primary" @bind-Value="@item.IsIncluded" />
                                        <MudIconButton Icon="@Icons.Material.Filled.Delete" Color="Color.Error" OnClick="@(() => DeleteLink(item))" />
                                    </MudStack>
                                </MudStack>
                            </MudListItem>
                        }
                        @if (AddLinks.Count == 0)
                        {
                            <MudListItem>
                                <MudStack Row Justify="Justify.Center">
                                    <MudText Typo="Typo.body1" Color="Color.Warning">No internet links.</MudText>
                                </MudStack>
                            </MudListItem>
                        }
                    </MudList><br/>
                </div>
            }
        </MudStack>
    </MudPopover>
    <MudOverlay Visible="Visible" OnClick="OnClose" />
</div>

